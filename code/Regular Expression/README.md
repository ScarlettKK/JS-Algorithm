# 工作中使用到的正则表达式总结

正则表达式，又称规则表达式，通常被用来[检索]、[替换]那些符合某个规则(模式)的字符串。

## JS正则表达式 基本语法

`/正则表达式主体/修饰符(可选)`

```javascript
var patt = /runoob/i
```

	/runoob/i  整体是一个正则表达式。

	runoob  是一个正则表达式主体 (用于检索)。

	i  是一个修饰符 (用于规定匹配规则)。

## 修饰符

用于规定匹配规则

	i 执行 对大小写不敏感 的匹配

	g 执行 全局 匹配（查找所有匹配而非在找到第一个匹配后停止）

	m 执行 多行 匹配 (将每一行都当成独立的一段进行匹配)

	默认匹配模式: 单行 非全局 对大小写敏感

代码示例:

```javascript
// 默认匹配模式: 非全局 对大小写敏感
var s = '1a31a\n4561a\n7891a\n1a1\n41a'
s.replace(/1A/, 'b')
// 输出: "1a31a
//       4561a
//       7891a
//       1a1
//       41a"
// 结果什么都没匹配出来...
```

```javascript
// i 执行 对大小写不敏感 的匹配
var s = '1a31a\n4561a\n7891a\n1a1\n41a'
s.replace(/1A/i, 'b')
// 输出: "b31a
//       4561a
//       7891a
//       1a1
//       41a"
// 第一个“1a”被匹配出来, 换成了'b'
```

```javascript
// g 执行 全局 匹配（查找所有匹配而非在找到第一个匹配后停止）
var s = '1a31a\n4561a\n7891a\n1a1\n41a'
s.replace(/1a/g, 'b')
// 输出: "b3b
//       456b
//       789b
//       b1
//       4b"
// 看到这里大家可能会疑惑, 怎么字符串中其实有换行, 但g也匹配了换行后的结果呢?

// 此时我们来转变一下:
var s = '1a31a\n4561a\n7891a\n1a1\n41a'
s.replace(/^1a/g, 'b')
// 输出: "b31a
//       4561a
//       7891a
//       1a1
//       41a"
// 这里我们是要匹配所有以“1a”开头的字符串
// 因为这里的修饰符没有m(多行匹配)
// 所以这里整段字符串会被当成一个字符串来匹配
// 字符串s的开头就是1a, 被替换成b, 替换结束

// 再举个例子:
var s = '4561a\n7891a\n1a1\n41a'
s.replace(/^1a/g, 'b')
// 这里什么都不会匹配出来, 因为这里整段字符串不以“1a”开头
```

修饰符g使用总结:
	
	所以g是全局匹配的意思, 也就是当我们的目的是匹配单纯的一段字符串(不管它是开头还是结尾)的时候, 
	它是会对全局进行搜索匹配的, 不管有没有换行

	而当我们的目的是匹配“以xx开头的字符串”的时候, g会把整段字符串当成一个整体来看待, 
	那么只会检测整体的开头是不是以xx开头, 并不会检测其中某一段的开头是不是xx

```javascript
// m 执行 多行 匹配 (将每一行都当成独立的一段进行匹配)
var s = '4561a\n7891a\n1a1\n41a'
s.replace(/^1a/m, 'b')
// 输出: "4561a
//	 7891a
//	 b1
//	 41a"
// 这里检测到第3段的开头是“1a”, 于是执行了替换
// m会把由换行符分开的每一段字符串当成独立的一个子字符串来看待, 这里会检测是否有一段子字符串以xx开头

// 修饰符m 通常会跟 修饰符g 一同搭配使用, 效果如下:
var s = '1a31a\n4561a\n7891a\n1a1\n41a'
s.replace(/^1a/gm, 'b')
// 输出: "b31a
//	 4561a
//	 7891a
//	 b1
//	 41a"
// 这里检测到1、4两段都以“1a”开头, 配合g进行了全局匹配与替换
```

修饰符m使用总结:

	/m代表多行模式multiline，如果目标字符串中不含有换行符\n，即只有一行，那么/m修饰符没有任何意义。

	如果正则表达式中不含有^或$匹配字符串的开头或结尾，那么/m修饰符没有任何意义。

	也就是说只有当目标字符串含有\n，而且正则表达式中含有^或$的时候，/m修饰符才有作用。

[注意事项]

我们需要注意字符串中的空格, 因为这会影响我们匹配的结果, 如:

```javascript
var s = '4561a\n7891a\n1a1\n41a'

// 与

var s = '4561a\n 7891a\n 1a1\n 41a'

// 的 s.replace(/^1a/gm, 'b') 匹配结果是不同的
// 第一个s是可以匹配到结果的,并能够进行replace
// 而第二个s匹配不到任何结果,因为后面几段字符串的开头是“ 1a”而不是“1a”
// 下面两段字符串同理

var s = `4561a
7891a
1a1
41a`

var s = `4561a
	 7891a
	 1a1
	 41a`

// 我们需要在正则表达式编程中注意这点
```
















